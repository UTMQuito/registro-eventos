<form id="registroForm" action="procesar_registro.php" method="POST">
  <label for="nombre">Nombre:</label>
  <input type="text" id="nombre" name="nombre" required>

  <label for="email">Correo electrónico:</label>
  <input type="email" id="email" name="email" required>

  <!-- Campo oculto para la ubicación -->
  <input type="hidden" id="ubicacion" name="ubicacion">

  <button type="submit">Registrarse</button>
</form>

<script>
  document.getElementById('registroForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Evitar envío hasta obtener ubicación

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        // Obtener latitud y longitud
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        // Asignar a campo oculto
        document.getElementById('ubicacion').value = lat + ',' + lon;

        // Enviar el formulario
        document.getElementById('registroForm').submit();
      }, function(error) {
        alert('No se pudo obtener la ubicación: ' + error.message);
        // Puedes decidir enviar sin ubicación si falla
        document.getElementById('registroForm').submit();
      });
    } else {
      alert('La geolocalización no es soportada por este navegador.');
      // Enviar sin ubicación
      document.getElementById('registroForm').submit();
    }
  });
</script>
